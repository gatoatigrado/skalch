#!/bin/bash
# not really, I just want to use formatting
# grshell script
new graph "SimpleLowering.grg"
# export hello.gxl
import SugaredTest.scala.ast.gxl ScalaAstModel.gm
select actions lgsp-SimpleLoweringActions.dll
# debug set layout Organic
debug set layout Compilergraph
dump set node FcnDef color black
dump set node ClassDef color red
dump set node Symbol color blue
dump set edge BridgeFcn color green
# show graph ycomp "--dolayout"
# debug enable
echo "loaded graph"
show num nodes
show num edges

echo "adding info links"
xgrs setEnclosingFunctionInitial* & setEnclosingFunction*
show num nodes
show num edges

echo "delete bridge functions"
xgrs deleteBridgeFunctions
validate xgrs testNoBridgeFunctions
show num nodes
show num edges

# echo "convert $this to a parameter"
# xgrs [transformThis]
# show num nodes
# show num edges

echo "delete dangling nodes"
xgrs deleteDangling*
show num nodes
show num edges

# exit
xgrs cleanupForDebug*
# show graph ycomp
# debug enable
